"use strict";let geojson_mp3,geojson_mp4,loading=[],geojson_nb={},geojson_wd={},geojson_mp1={},geojson_mp2={},ln1Data=[];!function(){const e=fetch("https://data.eindhoven.nl/api/records/1.0/search/?dataset=buurten&rows=116&facet=buurtcode&facet=buurtnaam&facet=wijkcode&facet=wijknaam").then(e=>e.json()),t=fetch("https://data.eindhoven.nl/api/records/1.0/search/?dataset=wijken&rows=20&facet=wijkcode&facet=wijknaam").then(e=>e.json()),o=fetch("https://raw.githubusercontent.com/tue-vll/data/master/Sport2017.json").then(e=>e.json()),n=fetch("https://raw.githubusercontent.com/tue-vll/data/master/Sport2006-2017.json").then(e=>e.json()),a=fetch("https://raw.githubusercontent.com/tue-vll/data/master/publicLight2017.json").then(e=>e.json()),s=fetch("https://raw.githubusercontent.com/tue-vll/data/master/bikeRoute.json").then(e=>e.json()),l=()=>{e.then(e=>{let t=e.records,n=t.length;geojson_nb.type="FeatureCollection",geojson_nb.features=[];for(let e=0;e<n;e++){let o={type:"Feature",geometry:{type:"Polygon",coordinates:t[e].fields.geo_shape.coordinates},properties:{neighborhood:t[e].fields.buurtnaam}};geojson_nb.features.push(o)}loading[0]="nb",o.then(e=>{let t=e,o=[];geojson_mp1=geojson_nb;for(let e=0;e<geojson_mp1.features.length;e++){let n=geojson_mp1.features[e].properties;n=n.neighborhood.replace(", ",",");const a=t.filter(e=>e.Buurten==n);o.push(a[0])}for(let e=0;e<geojson_mp1.features.length;e++)geojson_mp1.features[e].properties.sports=o[e]["doet aan sport 2017"];vizmaps("mp1","Gray","initialize"),loading[1]="mp1"})}),t.then(e=>{let t=e.records,o=t.length;geojson_wd.type="FeatureCollection",geojson_wd.features=[];for(let e=0;e<o;e++){let o={type:"Feature",geometry:{type:"Polygon",coordinates:t[e].fields.geo_shape.coordinates},properties:{ward:t[e].fields.wijknaam.slice(5)}};geojson_wd.features.push(o)}loading[2]="wd"}),n.then(e=>{let t=e,o=Object.keys(t[0]).length;for(let e=0;e<t.length;e++){let n={values:[]};for(let a=0;a<o-1;a++){let o=null!==t[e][2006]&&0!==t[e][2006],s=null!==t[e][2007]&&0!==t[e][2007],l=null!==t[e][2008]&&0!==t[e][2008],r=null!==t[e][2009]&&0!==t[e][2009],i=null!==t[e][2010]&&0!==t[e][2010],p=null!==t[e][2011]&&0!==t[e][2011],u=null!==t[e][2012]&&0!==t[e][2012],g=null!==t[e][2013]&&0!==t[e][2013],c=null!==t[e][2014]&&0!==t[e][2014],h=null!==t[e][2015]&&0!==t[e][2015],d=null!==t[e][2016]&&0!==t[e][2016],m=null!==t[e][2017]&&0!==t[e][2017];o&&s&&l&&r&&i&&p&&u&&g&&c&&h&&d&&m&&(n.name="",n.name=t[e].Buurten,n.values[a]={year:Object.keys(t[e])[a],percent:t[e][Object.keys(t[e])[a]]})}void 0!==n.name&&ln1Data.push(n)}vizcharts("ln1"),loading[3]="ln1"}),a.then(e=>{let t=e;geojson_mp2.type="FeatureCollection",geojson_mp2.features=[];for(let e=0;e<t.length;e++)if(""!==t[e].Kleur&&null!==t[e].Wattage&&t[e].Wattage>=100){let o=t[e].Locat.split(", "),n={type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(o[0]),parseFloat(o[1])]},properties:{color:t[e].Kleur,watt:t[e].Wattage}};geojson_mp2.features.push(n)}vizmaps("mp2","DarkGray","initialize"),loading[4]="mp2"}),d3.json("https://raw.githubusercontent.com/tue-vll/data/master/Green.json").then(function(e){geojson_mp3=e,vizmaps("mp3","Gray","initialize"),loading[5]="mp3"}),s.then(e=>{geojson_mp4=e,vizmaps("mp4","Gray","initialize"),loading[6]="mp4"})};$(document).ready(()=>{l()})}();