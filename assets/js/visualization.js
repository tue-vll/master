"use strict";let maptitles=[],mapCount,vizmaps=function vizmaps(container,mapType,purpose){let mapPurpose=arguments[2],selectedContainer=arguments[0],overlayedContainer=arguments[0].slice(0,-7),map=new L.Map(container).setView([51.46,5.45],11);L.esri.basemapLayer(mapType).addTo(map);let mapLayers={nb:function(loader){let projectPoint=function(t,e){let a=map.latLngToLayerPoint(new L.LatLng(e,t));this.stream.point(a.x,a.y)},transform=d3.geoTransform({point:projectPoint}),path=d3.geoPath().projection(transform),svg_nb=d3.select(map.getPanes().overlayPane).append("svg"),g_nb=svg_nb.append("g").attr("class","leaflet-zoom-hide"),feature_nb=g_nb.selectAll("path").data(geojson_nb.features).enter().append("path");function reset(){let bounds=path.bounds(geojson_nb),topLeft=bounds[0],bottomRight=bounds[1];function tooltip_nb(){feature_nb.on("mouseover",function(t){d3.select(this).transition().style("fill","rgba(200, 200, 200, 0.5)").duration(400)}).on("mousemove",function(d){let info;info=null!==d.properties.neighborhood?'<span class="nb-tooltip_neighbor">'+d.properties.neighborhood+"</span>":'<span class="nb-tooltip_neighbor">No Data</span>',$("#"+selectedContainer+"-tooltip").html(info).attr("aria-hidden","false").attr("width","auto").css("left",d3.event.pageX-eval("xPos_"+selectedContainer)+"px").css("top",d3.event.pageY-eval("yPos_"+selectedContainer)-40+"px")}).on("mouseout",function(){d3.select(this).transition().style("fill","rgba(200, 200, 200, 0.1)").duration(200),$("#"+selectedContainer+"-tooltip").attr("aria-hidden","true")})}svg_nb.attr("width",bottomRight[0]-topLeft[0]).attr("height",bottomRight[1]-topLeft[1]).style("left",topLeft[0]+"px").style("top",topLeft[1]+"px"),g_nb.attr("transform","translate("+-topLeft[0]+","+-topLeft[1]+")"),g_nb.classed("map-nb",!0),feature_nb.attr("d",path).style("stroke","#666666").style("fill","rgba(200, 200, 200, 0.1)").style("stroke-width","2px").attr("class","pointer-release").style("cursor","pointer"),tooltip_nb(),$(loader).attr("aria-hidden","true")}map.on("moveend",reset),reset()},wd:function wd(loader,tooltip){let projectPoint=function(t,e){let a=map.latLngToLayerPoint(new L.LatLng(e,t));this.stream.point(a.x,a.y)},transform=d3.geoTransform({point:projectPoint}),path=d3.geoPath().projection(transform),svg_wd=d3.select(map.getPanes().overlayPane).append("svg"),g_wd=svg_wd.append("g").attr("class","leaflet-zoom-hide"),feature_wd=g_wd.selectAll("path").data(geojson_wd.features).enter().append("path");function reset(){let bounds=path.bounds(geojson_wd),topLeft=bounds[0],bottomRight=bounds[1];function tooltip_wd(){feature_wd.on("mouseover",function(t){d3.select(this).transition().style("fill","rgba(200, 200, 200, 0.5)").duration(400)}).on("mousemove",function(d){let info;info=null!==d.properties.ward?'<span class="wd-tooltip_neighbor">'+d.properties.ward+"</span>":'<span class="wd-tooltip_neighbor">No Data</span>',$("#"+selectedContainer+"tooltip").html(info).attr("aria-hidden","false").attr("width","auto").css("left",d3.event.pageX-eval("xPos_"+selectedContainer)+"px").css("top",d3.event.pageY-eval("yPos_"+selectedContainer)-40+"px")}).on("mouseout",function(){d3.select(this).transition().style("fill","rgba(200, 200, 200, 0.1)").duration(200),$("#"+selectedContainer+"tooltip").attr("aria-hidden","true")})}svg_wd.attr("width",bottomRight[0]-topLeft[0]).attr("height",bottomRight[1]-topLeft[1]).style("left",topLeft[0]+"px").style("top",topLeft[1]+"px"),g_wd.attr("transform","translate("+-topLeft[0]+","+-topLeft[1]+")"),g_wd.classed("map-wd",!0),feature_wd.attr("d",path).style("stroke","#666666").style("fill","rgba(200, 200, 200, 0.1)").style("stroke-width","2px").attr("class","pointer-release").style("cursor","pointer"),tooltip_wd(),$(loader).attr("aria-hidden","true")}map.on("moveend",reset),reset()},mp1:function mp1(loader){let projectPoint=function(t,e){let a=map.latLngToLayerPoint(new L.LatLng(e,t));this.stream.point(a.x,a.y)},transform=d3.geoTransform({point:projectPoint}),path=d3.geoPath().projection(transform),svg_mp1=d3.select(map.getPanes().overlayPane).append("svg"),g_mp1=svg_mp1.append("g").attr("class","leaflet-zoom-hide"),feature_mp1=g_mp1.selectAll("path").data(geojson_mp1.features).enter().append("path");function reset(){let bounds=path.bounds(geojson_mp1),topLeft=bounds[0],bottomRight=bounds[1];function tooltip_mp1(){feature_mp1.on("mouseover",function(t){d3.select(this).transition().style("opacity",.5).duration(200),console.log(t.properties.sports)}).on("mousemove",function(d){let info;info=null!==d.properties.sports?'<span class="mp1-tooltip_neighbor">'+d.properties.neighborhood+'</span><span "mp1-tooltip_value">'+d.properties.sports+"%</span>":'<span class="mp1-tooltip_neighbor">'+d.properties.neighborhood+'</span><span "mp1-tooltip_value">No Data</span>',"Overlay"==mapPurpose?$("#"+overlayedContainer+"-tooltip").html(info).attr("aria-hidden","false").attr("width","auto").css("left",d3.event.pageX-eval("xPos_"+selectedContainer)+"px").css("top",d3.event.pageY-eval("yPos_"+selectedContainer)-40+"px"):$("#"+selectedContainer+"-tooltip").html(info).attr("aria-hidden","false").attr("width","auto").css("left",d3.event.pageX-eval("xPos_"+selectedContainer)+"px").css("top",d3.event.pageY-eval("yPos_"+selectedContainer)-40+"px")}).on("mouseout",function(){d3.select(this).transition().style("opacity",1).duration(200),"Overlay"==mapPurpose?$("#"+overlayedContainer+"-tooltip").attr("aria-hidden","true"):$("#"+selectedContainer+"-tooltip").attr("aria-hidden","true")})}svg_mp1.attr("width",bottomRight[0]-topLeft[0]).attr("height",bottomRight[1]-topLeft[1]).style("left",topLeft[0]+"px").style("top",topLeft[1]+"px"),"Overlay"==mapPurpose&&svg_mp1.classed("mp1-overlay",!0),g_mp1.attr("transform","translate("+-topLeft[0]+","+-topLeft[1]+")"),feature_mp1.attr("d",path).style("stroke","rgb(187,187,187)").style("stroke-width","1px").style("fill",t=>t.properties.sports>=70&t.properties.sports<80?"rgb(215,48,31)":t.properties.sports>=60&t.properties.sports<70?"rgb(252,141,89)":t.properties.sports>=50&t.properties.sports<60?"rgb(253,204,138)":t.properties.sports>=40&t.properties.sports<50?"rgb(254,240,217)":"rgb(212,212,212)").attr("class","pointer-release").style("cursor","pointer"),tooltip_mp1(),$(loader).attr("aria-hidden","true")}"Overlay"==mapPurpose&&"mp1"!=overlayedContainer&&svg_mp1.attr("aria-hidden",!0),map.on("moveend",reset),reset()},mp2:function(t){let e=d3.geoTransform({point:function(t,e){let a=map.latLngToLayerPoint(new L.LatLng(t,e));this.stream.point(a.x,a.y)}}),a=d3.geoPath().projection(e),o=d3.select(map.getPanes().overlayPane).append("svg"),r=o.append("g").attr("class","leaflet-zoom-hide"),s=r.selectAll("path").data(geojson_mp2.features).enter().append("path");function n(){let e=a.bounds(geojson_mp2),n=e[0],p=e[1];o.attr("width",p[0]-n[0]).attr("height",p[1]-n[1]).style("left",n[0]+"px").style("top",n[1]+"px"),r.attr("transform","translate("+-n[0]+","+-n[1]+")"),"Overlay"==mapPurpose&&o.classed("mp2-overlay",!0),s.attr("d",a).style("fill",t=>"geel"==t.properties.color?"rgb(247,189,48)":"wit"==t.properties.color?"rgb(255,255,255)":"blauw"==t.properties.color?"rgb(81,157,213)":"oranje"==t.properties.color?"rgb(243,112,33)":void 0).style("opacity",t=>t.properties.watt<=100?.5:t.properties.watt>100&&t.properties.watt<=150?.6:t.properties.watt>150&&t.properties.watt<=200?.7:t.properties.watt>200&&t.properties.watt<=250?.8:t.properties.watt>250&&t.properties.watt<=300?.9:t.properties.watt>300?1:void 0);let l=map.getZoom();l<=11?s.attr("d",a.pointRadius([.5])):12==l?s.attr("d",a.pointRadius([.5])):13==l?s.attr("d",a.pointRadius([1])):14==l?s.attr("d",a.pointRadius([2])):15==l?s.attr("d",a.pointRadius([3])):16==l?s.attr("d",a.pointRadius([4])):17==l?s.attr("d",a.pointRadius([5])):18==l?s.attr("d",a.pointRadius([6])):19==l?s.attr("d",a.pointRadius([7])):s.attr("d",a.pointRadius([8])),$(t).attr("aria-hidden","true")}"Overlay"==mapPurpose&&"mp2"!=overlayedContainer&&o.attr("aria-hidden",!0),map.on("moveend",n),n()},mp3:function mp3(loader){let projectPoint=function(t,e){let a=map.latLngToLayerPoint(new L.LatLng(e,t));this.stream.point(a.x,a.y)};const transform=d3.geoTransform({point:projectPoint}),path=d3.geoPath().projection(transform);let svg_mp3=d3.select(map.getPanes().overlayPane).append("svg"),g_mp3=svg_mp3.append("g").attr("class","leaflet-zoom-hide"),feature_mp3=g_mp3.selectAll("path").data(geojson_mp3.features).enter().append("path");function reset(){let bounds=path.bounds(geojson_mp3),topLeft=bounds[0],bottomRight=bounds[1];function tooltip_mp3(){feature_mp3.on("mouseover",function(t){d3.select(this).transition().style("opacity",.5).duration(200)}).on("mousemove",function(d){let info;info=null===d.properties.fclass?'<span class="mp3-tooltip_green"> Not Defined </span>':'<span class="mp3-tooltip_green">'+d.properties.fclass+"</span>",$("#"+selectedContainer+"-tooltip").html(info).attr("aria-hidden","false").attr("width","auto").css("left",d3.event.pageX-eval("xPos_"+selectedContainer)+"px").css("top",d3.event.pageY-eval("yPos_"+selectedContainer)-40+"px")}).on("mouseout",function(){d3.select(this).transition().style("opacity",1).duration(200),$("#"+selectedContainer+"-tooltip").attr("aria-hidden","true")})}svg_mp3.attr("width",bottomRight[0]-topLeft[0]).attr("height",bottomRight[1]-topLeft[1]).style("left",topLeft[0]+"px").style("top",topLeft[1]+"px"),g_mp3.attr("transform","translate("+-topLeft[0]+","+-topLeft[1]+")"),"Overlay"==mapPurpose&&svg_mp3.classed("mp3-overlay",!0),feature_mp3.attr("d",path).style("stroke-width","1px").style("fill",t=>"allotments"==t.properties.fclass?"rgb(237,248,177)":"farm"==t.properties.fclass?"rgb(65,171,93)":"forest"==t.properties.fclass?"rgb(0,68,27)":"grass"==t.properties.fclass?"rgb(173,221,142)":"meadow"==t.properties.fclass?"rgb(247,252,185)":"orchard"==t.properties.fclass?"rgb(199,233,180)":"park"==t.properties.fclass?"rgb(35,132,67)":"rgb(212,212,212)").attr("class","pointer-release").style("cursor","pointer"),tooltip_mp3(),$(loader).attr("aria-hidden",!0)}"Overlay"==mapPurpose&&"mp3"!=overlayedContainer&&svg_mp3.attr("aria-hidden",!0),map.on("moveend",reset),reset()},mp4:function(t){let e=d3.geoTransform({point:function(t,e){let a=map.latLngToLayerPoint(new L.LatLng(e,t));this.stream.point(a.x,a.y)}}),a=d3.geoPath().projection(e),o=d3.select(map.getPanes().overlayPane).append("svg"),r=o.append("g").attr("class","leaflet-zoom-hide"),s=r.selectAll("path").data(geojson_mp4.features).enter().append("path");function n(){let e=a.bounds(geojson_mp4),n=e[0],p=e[1];o.attr("width",p[0]-n[0]).attr("height",p[1]-n[1]).style("left",n[0]+"px").style("top",n[1]+"px"),r.attr("transform","translate("+-n[0]+","+-n[1]+")"),"Overlay"==mapPurpose&&o.classed("mp4-overlay",!0);let l=map.getZoom();s.attr("d",a).style("stroke","rgb(67,133,244)").style("opacity",.8).style("stroke-width",()=>l<=11?1:12==l?1.5:13==l?2:14==l?3:15==l?4:16==l?5:1).style("fill","none").attr("class","pointer-release").style("cursor","pointer"),$(t).attr("aria-hidden","true")}"Overlay"==mapPurpose&&"mp4"!=overlayedContainer&&o.attr("aria-hidden",!0),map.on("moveend",n),n()}};function initializeMaps(){"mp1"==selectedContainer?(mapLayers.mp1("#"+selectedContainer+"-loader"),maptitles[0]=$("#"+selectedContainer).prev().html()):"mp2"==selectedContainer?(mapLayers.mp2("#"+selectedContainer+"-loader"),maptitles[1]=$("#"+selectedContainer).prev().html()):"mp3"==selectedContainer?(mapLayers.mp3("#"+selectedContainer+"-loader"),maptitles[2]=$("#"+selectedContainer).prev().html()):"mp4"==selectedContainer?(mapLayers.mp4("#"+selectedContainer+"-loader"),maptitles[3]=$("#"+selectedContainer).prev().html()):"mp1Overlay"==selectedContainer?(mapLayers.mp1("#"+selectedContainer+"-loader"),mapLayers.mp2("#"+selectedContainer+"-loader"),mapLayers.mp3("#"+selectedContainer+"-loader"),mapLayers.mp4("#"+selectedContainer+"-loader"),xPos_mp1Overlay=$("#mp1Overlay").offset().left,yPos_mp1Overlay=$("#mp1Overlay").offset().top):"mp2Overlay"==selectedContainer?(mapLayers.mp1("#"+selectedContainer+"-loader"),mapLayers.mp2("#"+selectedContainer+"-loader"),mapLayers.mp3("#"+selectedContainer+"-loader"),mapLayers.mp4("#"+selectedContainer+"-loader")):"mp3Overlay"==selectedContainer?(mapLayers.mp1("#"+selectedContainer+"-loader"),mapLayers.mp2("#"+selectedContainer+"-loader"),mapLayers.mp3("#"+selectedContainer+"-loader"),mapLayers.mp4("#"+selectedContainer+"-loader"),xPos_mp3Overlay=$("#mp3Overlay").offset().left,yPos_mp3Overlay=$("#mp3Overlay").offset().top):"mp4Overlay"==selectedContainer&&(mapLayers.mp1("#"+selectedContainer+"-loader"),mapLayers.mp2("#"+selectedContainer+"-loader"),mapLayers.mp3("#"+selectedContainer+"-loader"),mapLayers.mp4("#"+selectedContainer+"-loader"))}initializeMaps()},vizcharts=function(t){function e(t){let e=d3.select(t.node().parentNode),a=parseInt(t.style("width")),o=parseInt(t.style("height")),r=a/o;function s(){let a=parseInt(e.style("width"));t.attr("width",a),t.attr("height",Math.round(a/r))}t.attr("viewBox","0 0 "+a+" "+o).attr("perserveAspectRatio","xMinYMid").call(s),d3.select(window).on("resize."+e.attr("id"),s)}"ln1"==arguments[0]&&function(){let t=ln1Data,a=30,o=26,r=80,s=40,n=parseInt(d3.select("#ln1").style("width"))-s-o,p=parseInt(d3.select("#ln1").style("height"))-a-r,l=parseInt(d3.select("#ln1").style("width")),i=parseInt(d3.select("#ln1").style("height"))-40,d=d3.timeParse("%Y");t.forEach(t=>{t.values.forEach(t=>{t.year=d(t.year),t.percent=+t.percent})});let m=d3.scaleTime().range([0,n]),c=d3.scaleLinear().range([p,0]);m.domain(d3.extent(t[0].values,function(t){return t.year})),c.domain([30,90]);let f=d3.axisBottom(m),g=d3.axisLeft(c).ticks(7).tickSize(4),u=d3.axisLeft().tickFormat("").tickSize(-n).scale(c),h=d3.select("#ln1").append("svg").attr("class",()=>{if("Apple Computer, Inc."==navigator.vendor)return"topMargin"}).attr("height",i).attr("width",l).style("cursor","pointer").on("mouseenter",()=>{$(".ln1-group").addClass("in-active")}).on("mouseleave",()=>{$(".ln1-group").removeClass("in-active")}).call(e).attr("transform","translate(0,40)").append("g").attr("width",n).attr("height",p).attr("transform","translate("+s+","+a+")");h.append("g").attr("class","grid").call(u);let y=d3.line().x(t=>m(t.year)).y(t=>c(t.percent));h.append("g").attr("class","ln1lines").selectAll(".ln1line-group").data(t).enter().append("g").attr("class","ln1-group").append("path").attr("class","line").attr("d",t=>y(t.values)).on("mouseover",function(t){this.parentNode.appendChild(this),d3.select(this).classed("active",!0)}).on("mousemove",function(t){let e='<span class="ln1-tooltip_neighbor">'+t.name+"</span>";$("#ln1-tooltip").html(e).attr("aria-hidden",!1).attr("width","auto").attr("height","100px").css("left",d3.event.pageX-xPos_ln1+"px").css("top",d3.event.pageY-yPos_ln1-40+"px")}).on("mouseout",function(){d3.select(this).classed("active",!1),$("#ln1-tooltip").attr("aria-hidden",!0)}),h.append("g").attr("class","ln1-xAxis").attr("transform","translate(0,"+p+")").call(f),h.append("g").attr("class","ln1-yAxis").call(g).call(t=>t.select(".domain").remove()),h.append("text").attr("y",-20).attr("x",0).attr("dy","1em").style("text-anchor","middle").text("percent").style("font-size","10px").style("font-weight","bold"),$("#ln1-loader").attr("aria-hidden",!0)}()};